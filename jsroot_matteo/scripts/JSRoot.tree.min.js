var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,n,h){a!=Array.prototype&&a!=Object.prototype&&(a[n]=h.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,n,h,t){if(n){h=$jscomp.global;a=a.split(".");for(t=0;t<a.length-1;t++){var q=a[t];q in h||(h[q]={});h=h[q]}a=a[a.length-1];t=h[a];n=n(t);n!=t&&null!=n&&$jscomp.defineProperty(h,a,{configurable:!0,writable:!0,value:n})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,h,t){h=null!=h?h:function(a){return a};var q=[],n="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof n){a=n.call(a);for(var e=0;!(n=a.next()).done;)q.push(h.call(t,n.value,e++))}else for(n=a.length,e=0;e<n;e++)q.push(h.call(t,a[e],e));return q}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var n=0;return function(){return n<a.length?{done:!1,value:a[n++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,n){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:n})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(h){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(h||"")+"_"+n++,h)}var n=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,n){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var h=0,t={next:function(){if(h<a.length){var q=h++;return{value:n(q,a[q]),done:!1}}t.next=function(){return{done:!0,value:void 0}};return t.next()}};t[Symbol.iterator]=function(){return t};return t};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,h){return h})}},"es8","es3");$jscomp.makeIterator=function(a){var n="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return n?n.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function n(){this.batch_=null}function h(a){return a instanceof q?a:new q(function(e,h){e(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;n.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var e=this;this.asyncExecuteFunction(function(){e.executeBatch_()})}this.batch_.push(a)};var t=$jscomp.global.setTimeout;n.prototype.asyncExecuteFunction=function(a){t(a,0)};n.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var h=0;h<a.length;++h){var q=a[h];a[h]=null;try{q()}catch(A){this.asyncThrow_(A)}}}this.batch_=null};n.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var q=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{a(e.resolve,e.reject)}catch(C){e.reject(C)}};q.prototype.createResolveAndReject_=function(){function a(a){return function(e){q||(q=!0,a.call(h,e))}}var h=this,q=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};q.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof q)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};q.prototype.resolveToNonPromiseObj_=function(a){var e=void 0;try{e=a.then}catch(C){this.reject_(C);return}"function"==typeof e?
this.settleSameAsThenable_(e,a):this.fulfill_(a)};q.prototype.reject_=function(a){this.settle_(2,a)};q.prototype.fulfill_=function(a){this.settle_(1,a)};q.prototype.settle_=function(a,h){if(0!=this.state_)throw Error("Cannot settle("+a+", "+h+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=h;this.executeOnSettledCallbacks_()};q.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)r.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var r=new n;q.prototype.settleSameAsPromise_=function(a){var e=this.createResolveAndReject_();a.callWhenSettled_(e.resolve,e.reject)};q.prototype.settleSameAsThenable_=function(a,h){var e=this.createResolveAndReject_();try{a.call(h,e.resolve,e.reject)}catch(A){e.reject(A)}};q.prototype.then=function(a,h){function e(b,d){return"function"==typeof b?function(c){try{n(b(c))}catch(u){t(u)}}:d}var n,t,r=new q(function(b,d){n=b;t=d});this.callWhenSettled_(e(a,n),e(h,t));return r};
q.prototype.catch=function(a){return this.then(void 0,a)};q.prototype.callWhenSettled_=function(a,h){function e(){switch(q.state_){case 1:a(q.result_);break;case 2:h(q.result_);break;default:throw Error("Unexpected state: "+q.state_);}}var q=this;null==this.onSettledCallbacks_?r.asyncExecute(e):this.onSettledCallbacks_.push(e)};q.resolve=h;q.reject=function(a){return new q(function(e,h){h(a)})};q.race=function(a){return new q(function(e,q){for(var n=$jscomp.makeIterator(a),t=n.next();!t.done;t=n.next())h(t.value).callWhenSettled_(e,
q)})};q.all=function(a){var e=$jscomp.makeIterator(a),n=e.next();return n.done?h([]):new q(function(a,q){function t(c){return function(u){b[c]=u;d--;0==d&&a(b)}}var b=[],d=0;do b.push(void 0),d++,h(n.value).callWhenSettled_(t(b.length-1),q),n=e.next();while(!n.done)})};return q},"es6","es3");
JSROOT.define(["io","math"],function(a,n){function h(){this.branches=[];this.names=[];this.directs=[];this.break_execution=0;this.tgtobj={}}function t(b,d){if("object"!==typeof b)return 0;var c=Object.prototype.toString.apply(b);if(0!==c.indexOf("[object"))return 0;c=c.indexOf("Array]");if(0>c)return 0;if(8<c)return 2;if(!d)return 1;var a;d=!0;for(c=0;c<b.length;++c){var f=typeof b[c];a||(a=f);if(f!==a){d=!1;break}if("object"==f&&t(b[c])){d=!1;break}}return d?2:1}function q(b,d,c){this.object=b;this.value=
0;this.arr=[];this.indx=[];this.cnt=-1;this.tgtobj=c;this.select="object"===typeof d?d:[]}function r(b){this.globals=b;this.code="";this.brindex=[];this.branches=[];this.brarray=[];this.func=null;this.kind=void 0;this.buf=[]}function e(){h.call(this);this.ndim=0;this.vars=[];this.hist=this.cut=null;this.histo_drawopt="";this.hist_name="$htemp";this.hist_title="Result of TTree::Draw";this.graph=!1;this.hist_args=[];this.arr_limit=1E3;this.htype="F";this.monitoring=0;this.globals={};this.aver_diff=
this.last_progress=0}function F(b,d){function c(c){if(!c||c.fName!==u)return!1;if(c.fType===b.fStreamerType||c.fType===a.kBool&&b.fStreamerType===a.kUChar||(b.fStreamerType===a.kSTL||b.fStreamerType===a.kSTL+a.kOffsetL||b.fStreamerType===a.kSTLp||b.fStreamerType===a.kSTLp+a.kOffsetL)&&c.fType===a.kStreamer)return!0;console.warn("Should match element",c.fType,"with branch",b.fStreamerType);return!1}if(!b||!d||"TBranchElement"!==b._typename||0>b.fID||0>b.fStreamerType)return null;d=(d=d.findStreamerInfo(b.fClassName,
b.fClassVersion,b.fCheckSum))&&d.fElements?d.fElements.arr:null;if(!d)return null;var u=b.fName,f=u.indexOf("[");0<f&&(u=u.substr(0,f));f=u.lastIndexOf(".");0<f&&(u=u.substr(f+1));if(c(d[b.fID]))return d[b.fID];for(f=0;f<d.length;++f)if(f!==b.fID&&c(d[f]))return d[f];console.error("Did not found/match element for branch",b.fName,"class",b.fClassName);return null}function C(b,d,c){d=(d=b.findStreamerInfo(d))&&d.fElements?d.fElements.arr:null;var a=null;if(!d)return"";for(var f=0;f<d.length;++f)if("BASE"===
d[f].fTypeName){var k=C(b,d[f].fName,c);if(k)return k}else if(d[f].fName===c){a=d[f];break}if(!a)return"";b=a.fTypeName;"*"===b[b.length-1]&&(b=b.substr(0,b.length-1));return b}function A(b,d,c,u){if(!b||"TBranchElement"!==b._typename)return"";if(b.fType===JSROOT.BranchType.kLeafNode&&-2===b.fID&&-1===b.fStreamerType)return b.fClassName;if(c&&b.fClonesName&&(b.fType===JSROOT.BranchType.kClonesNode||b.fType===JSROOT.BranchType.kSTLNode))return b.fClonesName;d=F(b,d.$file);if(b.fType===JSROOT.BranchType.kBaseClassNode&&
d&&"BASE"===d.fTypeName)return d.fName;if(b.fType===JSROOT.BranchType.kObjectNode)return!d||d.fType!==a.kObject&&d.fType!==a.kAny?"TObject":d.fTypeName;if(b.fType===JSROOT.BranchType.kLeafNode&&d&&u){if(d.fType===a.kObject||d.fType===a.kAny)return d.fTypeName;if(d.fType===a.kObjectp)return d.fTypeName.substr(0,d.fTypeName.length-1)}return""}function G(b){var d=JSROOT.getMethods(b),c={names:[],values:[],Create:function(){for(var b={},c=0;c<this.names.length;++c)b[this.names[c]]=this.values[c];return b}};
c.names.push("_typename");c.values.push(b);for(var a in d)c.names.push(a),c.values.push(d[a]);return c}function L(b,d,c){var a="";for(c=c||0;c<b.arr.length;++c)0===b.arr[c].fName.indexOf(d)&&b.arr[c].fClassName&&(a=b.arr[c].fClassName);return a}JSROOT.BranchType={kLeafNode:0,kBaseClassNode:1,kObjectNode:2,kClonesNode:3,kSTLNode:4,kClonesMemberNode:31,kSTLMemberNode:41};a.BranchBits={kDoNotProcess:JSROOT.BIT(10),kIsClone:JSROOT.BIT(11),kBranchObject:JSROOT.BIT(12),kBranchAny:JSROOT.BIT(17),kAutoDelete:JSROOT.BIT(15),
kDoNotUseBufferMap:JSROOT.BIT(22)};h.prototype.addBranch=function(b,d,c){d||(d="string"===typeof b?b:"br"+this.branches.length);this.branches.push(b);this.names.push(d);this.directs.push(c);return this.branches.length-1};h.prototype.indexOfBranch=function(b){return this.branches.indexOf(b)};h.prototype.nameOfBranch=function(b){return this.names[b]};h.prototype.ShowProgress=function(){};h.prototype.Abort=function(){this.break_execution=-1111};h.prototype.Begin=function(){};h.prototype.Process=function(){};
h.prototype.Terminate=function(){};q.prototype.next=function(){var b,d=this.cnt;if(0<=d){if(++this.fastindx<this.fastlimit)return this.value=this.fastarr[this.fastindx],!0;for(;0<=--d&&!(void 0===this.select[d]&&++this.indx[d]<this.arr[d].length););if(0>d)return!1}for(;;){var c=(b=0>d?this.object:this.arr[d][this.indx[d]])?typeof b:"any";"object"===c&&(void 0!==b._typename?JSROOT.isRootCollection(b)?(b=b.arr,c="array"):c="any":c=!isNaN(b.length)&&0<t(b)?"array":"any");if("$self$"==this.select[d+1])return this.value=
b,this.fastindx=this.fastlimit=0,this.cnt=d+1,!0;if("any"==c&&"string"===typeof this.select[d+1])this.arr[++d]=b,this.indx[d]=this.select[d];else if("array"===c&&(0<b.length||"$size$"===this.select[d+1]))switch(this.arr[++d]=b,this.select[d]){case void 0:this.indx[d]=0;break;case "$last$":this.indx[d]=b.length-1;break;case "$size$":return this.value=b.length,this.fastindx=this.fastlimit=0,this.cnt=d,!0;default:isNaN(this.select[d])?(this.select[d].produce(this.tgtobj),this.indx[d]=Math.round(this.select[d].get(0))):
(this.indx[d]=this.select[d],0>this.indx[d]&&(this.indx[d]=b.length-1))}else{if(0>d)return!1;this.value=b;void 0===this.select[d]?(this.fastarr=this.arr[d],this.fastindx=this.indx[d],this.fastlimit=this.fastarr.length):this.fastindx=this.fastlimit=0;this.cnt=d;return!0}}};q.prototype.reset=function(){this.arr=[];this.indx=[];delete this.fastarr;this.cnt=-1;this.value=0};r.prototype.parse=function(b,d,c,a,f){function u(b){return"A"<=b&&"Z">=b||"a"<=b&&"z">=b?!0:"_"===b}function x(b){return u(b)||"0"<=
b&&"9">=b?!0:!1}c||(c="");this.code=(a?a.fName:"")+c;for(var w=0,m=0,g=null;w<c.length||a;){var e=[];if(a)g=a,a=void 0;else{for(m=w;m<c.length&&(x(c[m])||"."===c[m]);)m++;if("$"==c[m]){g="";switch(c.substr(w,m-w)){case "LocalEntry":case "Entry":g="arg.$globals.entry";break;case "Entries":g="arg.$globals.entries"}if(g){c=c.substr(0,w)+g+c.substr(m+1);w+=g.length;continue}}g=b.FindBranchComplex(c.substr(w,m-w));if(!g){w=m+1;continue}g.branch&&void 0!==g.rest&&(m-=g.rest.length,f=void 0,g=g.branch);
m>=c.length-1&&"."===c[c.length-1]&&(e.push("$self$"),m=c.length)}for(;m<c.length;){if("@"===c[m]&&"@size"==c.substr(m,5)&&0==e.length){m+=5;f=!0;break}if("."===c[m]){var p=++m;if("@"===c[p]&&"@size"===c.substr(p,5)){e.push("$size$");m+=5;break}if(!u(c[p])){e.push("$self$");break}for(;m<c.length&&x(c[m]);)m++;if("("==c[m]){m=p-1;break}if(0===e.length&&g)if(g.fType===JSROOT.BranchType.kClonesNode||g.fType===JSROOT.BranchType.kSTLNode)e.push(void 0);else{var h=A(g,b,!1,!0);h&&JSROOT.isRootCollection(null,
h)&&e.push(void 0)}e.push(c.substr(p,m-p))}else{if("["!==c[m])break;if("]"==c[m+1])e.push(void 0),m+=2;else{p=m++;for(h=0;m<c.length&&("]"!=c[m]||0<h);)"["==c[m]?h++:"]"==c[m]&&h--,m++;p=c.substr(p+1,m-p-1);switch(p){case "":case "$all$":e.push(void 0);break;case "$last$":e.push("$last$");break;case "$size$":e.push("$size$");break;case "$first$":e.push(0);break;default:if(isNaN(parseInt(p))){h=new r(this.globals);if(!h.parse(b,d,p))return!1;e.push(h)}else e.push(parseInt(p))}m++}}}0===e.length?e=
void 0:1===e.length&&void 0===e[0]&&(e=!0);p=d.indexOfBranch(g);0>p&&(p=d.addBranch(g,void 0,f));f=void 0;this.brindex.push(p);this.branches.push(d.nameOfBranch(p));this.brarray.push(e);if(0===w&&m===c.length&&1===this.branches.length)return this.direct_branch=!0;e="arg.var"+(this.branches.length-1);c=c.substr(0,w)+e+c.substr(m);w+=e.length}c=c.replace(/TMath::Exp\(/g,"Math.exp(").replace(/TMath::Abs\(/g,"Math.abs(").replace(/TMath::Prob\(/g,"arg.$math.Prob(").replace(/TMath::Gaus\(/g,"arg.$math.Gaus(");
this.func=new Function("arg","return ("+c+")");return!0};r.prototype.is_dummy=function(){return 0===this.branches.length&&!this.func};r.prototype.produce=function(b){this.length=1;this.isarray=!1;if(this.is_dummy())this.value=1,this.kind="number";else{for(var d={$globals:this.globals,$math:n},c=-1,a=[],f=0;f<this.branches.length;++f){var k="var"+f;d[k]=b[this.branches[f]];void 0===this.brarray[f]&&(this.brarray[f]=0<t(d[k])||JSROOT.isRootCollection(d[k]));if(!1!==this.brarray[f]){if(!0===this.brarray[f]&&
2===t(d[k],!0))a[f]=d[k];else for(k=new q(d[k],this.brarray[f],b),a[f]=[];k.next();)a[f].push(k.value);if(0>c||c<a[f].length)c=a[f].length}}if(0>c)this.value=this.direct_branch?d.var0:this.func(d),this.kind||(this.kind=typeof this.value);else if(0==c)this.value=this.length=0;else{this.length=c;this.isarray=!0;if(this.direct_branch)this.value=a[0];else for(this.value=Array(c),b=0;b<c;++b){for(f=0;f<this.branches.length;++f)a[f]&&(d["var"+f]=a[f][b]);this.value[b]=this.func(d)}this.kind||(this.kind=
typeof this.value[0])}}};r.prototype.get=function(b){return this.isarray?this.value[b]:this.value};r.prototype.appendArray=function(b){this.buf=this.buf.concat(b[this.branches[0]])};e.prototype=Object.create(h.prototype);e.prototype.setCallback=function(b,d){this.result_callback=b;this.progress_callback=d};e.prototype.parseParameters=function(b,d,c){if(!c||"string"!==typeof c)return"";for(var a=c.lastIndexOf(";");0<=a;){var f=c.substr(a+1),k=void 0;c=c.substr(0,a);a=c.lastIndexOf(";");var e=f.indexOf(":");
0<e&&(k=f.substr(e+1),f=f.substr(0,e));e=parseInt(k);if(!k||isNaN(e))e=void 0;switch(f){case "num":case "entries":case "numentries":"all"===k?d.numentries=b.fEntries:"half"===k?d.numentries=Math.round(b.fEntries/2):void 0!==e&&(d.numentries=e);break;case "first":void 0!==e&&(d.firstentry=e);break;case "mon":case "monitor":d.monitoring=void 0!==e?e:5E3;break;case "player":d.player=!0;break;case "dump":d.dump=!0;break;case "maxseg":case "maxrange":e&&(b.$file.fMaxRanges=e);break;case "accum":e&&(this.arr_limit=
e);break;case "htype":k&&1===k.length&&(this.htype=k.toUpperCase(),"C"!==this.htype&&"S"!==this.htype&&"I"!==this.htype&&"F"!==this.htype&&"L"!==this.htype&&"D"!==this.htype&&(this.htype="F"));break;case "hbins":this.hist_nbins=parseInt(k);(isNaN(this.hist_nbins)||3>=this.hist_nbins)&&delete this.hist_nbins;break;case "drawopt":d.drawopt=k;break;case "graph":d.graph=e||!0}}a=c.lastIndexOf(">>");if(0<=a)if(b=c.substr(a+2).trim(),c=c.substr(0,a).trim(),a=b.indexOf("("),0<a&&(this.hist_name=b.substr(0,
a),b=b.substr(a)),"dump"===b)d.dump=!0;else if(0==b.indexOf("Graph"))d.graph=!0;else if(0>a)this.hist_name=b;else if("("==b[0]&&")"==b[b.length-1]){b=b.substr(1,b.length-2).split(",");a=!0;for(f=0;f<b.length;++f)b[f]=0===f%3?parseInt(b[f]):parseFloat(b[f]),isNaN(b[f])&&(a=!1);a&&(this.hist_args=b)}d.dump&&(this.dump_values=!0,d.reallocate_objects=!0,void 0===d.numentries&&(d.numentries=10));return c};e.prototype.parseDrawExpression=function(b,d){var c=this.parseParameters(b,d,d.expr),a="";this.hist_title=
"drawing '"+c+"' from "+b.fName;if(d.cut)a=d.cut;else{var f=c.replace(/TMath::/g,"TMath__").lastIndexOf("::");0<f&&(a=c.substr(f+2).trim(),c=c.substr(0,f).trim())}d.parse_expr=c;d.parse_cut=a;var k=[],e=0,h=0,m=0;for(f=0;f<c.length;++f)switch(c[f]){case "(":e++;break;case ")":e--;break;case "[":h++;break;case "]":h--;break;case ":":":"==c[f+1]?f++:(!e&&!h&&f>m&&k.push(c.substr(m,f-m)),m=f+1)}!e&&!h&&f>m&&k.push(c.substr(m,f-m));if(1>k.length||3<k.length)return!1;this.ndim=k.length;c=!a;for(f=0;f<
this.ndim;++f){this.vars[f]=new r(this.globals);if(!this.vars[f].parse(b,this,k[f]))return!1;this.vars[f].direct_branch||(c=!1)}this.cut=new r(this.globals);if(a&&!this.cut.parse(b,this,a))return!1;if(!this.branches.length)return console.warn("no any branch is selected"),!1;c&&(this.ProcessArrays=this.ProcessArraysFunc);this.monitoring=d.monitoring;this.graph=d.graph;this.histo_drawopt=void 0!==d.drawopt?d.drawopt:2===this.ndim?"col":"";return!0};e.prototype.drawOnlyBranch=function(b,d,c,a){this.ndim=
1;0==c.indexOf("dump")&&(c=";"+c);c=this.parseParameters(b,a,c);this.monitoring=a.monitoring;a.dump&&(this.dump_values=!0,a.reallocate_objects=!0);if(this.dump_values)return this.hist=[],this.leaf=a.leaf,this.copy_fields=(a.branch.fLeaves&&1<a.branch.fLeaves.arr.length||a.branch.fBranches&&0<a.branch.fBranches.arr.length)&&!a.leaf,this.addBranch(d,"br0",a.direct_branch),this.Process=this.ProcessDump,!0;this.vars[0]=new r(this.globals);if(!this.vars[0].parse(b,this,c,d,a.direct_branch))return!1;this.hist_title=
"drawing branch '"+d.fName+(c?"' expr:'"+c:"")+"'  from "+b.fName;this.cut=new r(this.globals);this.vars[0].direct_branch&&(this.ProcessArrays=this.ProcessArraysFunc);return!0};e.prototype.Begin=function(b){this.globals.entries=b.fEntries;this.monitoring&&(this.lasttm=(new Date).getTime())};e.prototype.ShowProgress=function(b){if("undefined"!=typeof document&&JSROOT.Painter){if(void 0===b||isNaN(b))return JSROOT.Painter.showProgress();if(this.last_progress!==b){var d=b-this.last_progress;this.aver_diff||
(this.aver_diff=d);this.aver_diff=.3*d+.7*this.aver_diff}d=0;0>=this.aver_diff?d=0:1E-4>this.aver_diff?d=3:.001>this.aver_diff?d=2:.01>this.aver_diff&&(d=1);var c=document.createElement("p"),a=document.createTextNode("TTree draw "+(100*b).toFixed(d)+" %  "),f=this;c.appendChild(a);c.title="Click on element to break drawing";c.onclick=function(){if(3>++f.break_execution)return c.title="Tree draw will break after next I/O operation",a.nodeValue="Breaking ... ";f.Abort();JSROOT.Painter.showProgress()};
JSROOT.Painter.showProgress(c);this.last_progress=b}};e.prototype.getBitsBins=function(b,d){d.nbins=d.max=b;d.fLabels=JSROOT.create("THashList");for(var c=0;c<b;++c){var a=JSROOT.create("TObjString");a.fString=c.toString();a.fUniqueID=c+1;d.fLabels.Add(a)}return d};e.prototype.getMinMaxBins=function(b,d){var c={min:0,max:0,nbins:d,k:1,fLabels:null,title:""};if(b>=this.ndim)return c;var a=this.vars[b].buf;c.title=this.vars[b].code||"";if("object"===this.vars[b].kind){for(var f,k=!0,e=8,h=0;h<a.length;++h)a[h]&&
(f||(f=a[h]._typename),f!==a[h]._typename&&(k=!1),a[h].fNbits&&(e=Math.max(e,a[h].fNbits+1)));if(f&&k&&"TBits"===f&&0===b)return this.fill1DHistogram=this.fillTBitsHistogram,e%8&&(e=(e&65520)+8),"bits"===this.hist_name&&1==this.hist_args.length&&this.hist_args[0]&&(e=this.hist_args[0]),this.getBitsBins(e,c)}if("string"===this.vars[b].kind){c.lbls=[];for(d=0;d<a.length;++d)0>c.lbls.indexOf(a[d])&&c.lbls.push(a[d]);c.lbls.sort();c.max=c.nbins=c.lbls.length;c.fLabels=JSROOT.create("THashList");for(d=
0;d<c.lbls.length;++d)a=JSROOT.create("TObjString"),a.fString=c.lbls[d],a.fUniqueID=d+1,""===a.fString&&(a.fString="<empty>"),c.fLabels.Add(a)}else{if(0===b&&"bits"===this.hist_name&&1>=this.hist_args.length)return this.fill1DHistogram=this.FillBitsHistogram,this.getBitsBins(this.hist_args[0]||32,c);if(3*b+2<this.hist_args.length)c.nbins=this.hist_args[3*b],c.min=this.hist_args[3*b+1],c.max=this.hist_args[3*b+2];else{c.min=Math.min.apply(null,a);c.max=Math.max.apply(null,a);this.hist_nbins&&(d=c.nbins=
this.hist_nbins);c.isinteger=Math.round(c.min)===c.min&&Math.round(c.max)===c.max;if(c.isinteger)for(b=0;b<a.length;++b)if(a[b]!==Math.round(a[b])){c.isinteger=!1;break}if(c.isinteger)if(c.min=Math.round(c.min),c.max=Math.round(c.max),c.max-c.min<5*d)--c.min,c.max+=2,c.nbins=Math.round(c.max-c.min);else{a=c.max-c.min+2;for(b=Math.floor(a/d);b*d<a;)b++;c.max=c.min+d*b}else c.min>=c.max?(c.max=c.min,100>Math.abs(c.min)?(--c.min,c.max+=1):0<c.min?(c.min*=.9,c.max*=1.1):(c.min*=1.1,c.max*=.9)):c.max+=
(c.max-c.min)/c.nbins}}c.k=c.nbins/(c.max-c.min);c.GetBin=function(b){b=this.lbls?this.lbls.indexOf(b):Math.floor((b-this.min)*this.k);return 0>b?0:b>this.nbins?this.nbins+1:b+1};return c};e.prototype.createHistogram=function(){if(!this.hist&&this.vars[0].buf){if(this.dump_values)this.hist=[],this.fill1DHistogram=this.fill2DHistogram=this.fill3DHistogram=this.dumpValues;else if(this.graph){var b=this.vars[0].buf.length;1==this.ndim?this.hist=JSROOT.createTGraph(b,Array.from(Array(b).keys()),this.vars[0].buf):
2==this.ndim&&(this.hist=JSROOT.createTGraph(b,this.vars[0].buf,this.vars[1].buf),delete this.vars[1].buf);this.hist.fTitle=this.hist_title;this.hist.fName="Graph"}else{this.x=this.getMinMaxBins(0,1<this.ndim?50:200);this.y=this.getMinMaxBins(1,50);this.z=this.getMinMaxBins(2,50);switch(this.ndim){case 1:this.hist=JSROOT.createHistogram("TH1"+this.htype,this.x.nbins);break;case 2:this.hist=JSROOT.createHistogram("TH2"+this.htype,this.x.nbins,this.y.nbins);break;case 3:this.hist=JSROOT.createHistogram("TH3"+
this.htype,this.x.nbins,this.y.nbins,this.z.nbins)}this.hist.fXaxis.fTitle=this.x.title;this.hist.fXaxis.fXmin=this.x.min;this.hist.fXaxis.fXmax=this.x.max;this.hist.fXaxis.fLabels=this.x.fLabels;1<this.ndim&&(this.hist.fYaxis.fTitle=this.y.title);this.hist.fYaxis.fXmin=this.y.min;this.hist.fYaxis.fXmax=this.y.max;this.hist.fYaxis.fLabels=this.y.fLabels;2<this.ndim&&(this.hist.fZaxis.fTitle=this.z.title);this.hist.fZaxis.fXmin=this.z.min;this.hist.fZaxis.fXmax=this.z.max;this.hist.fZaxis.fLabels=
this.z.fLabels;this.hist.fName=this.hist_name;this.hist.fTitle=this.hist_title;this.hist.fOption=this.histo_drawopt;this.hist.$custom_stat="$htemp"==this.hist_name?111110:111111}b=this.vars[0].buf;var d=this.cut.buf,c=b.length;if(!this.graph)switch(this.ndim){case 1:for(var a=0;a<c;++a)this.fill1DHistogram(b[a],d?d[a]:1);break;case 2:a=this.vars[1].buf;for(var f=0;f<c;++f)this.fill2DHistogram(b[f],a[f],d?d[f]:1);delete this.vars[1].buf;break;case 3:a=this.vars[1].buf;f=this.vars[2].buf;for(var k=
0;k<c;++k)this.fill3DHistogram(b[k],a[k],f[k],d?d[k]:1);delete this.vars[1].buf;delete this.vars[2].buf}delete this.vars[0].buf;delete this.cut.buf}};e.prototype.fillTBitsHistogram=function(b,d){if(d&&b&&b.fNbits&&b.fAllBits)for(var c=Math.min(b.fNbits+1,8*b.fNbytes),a=0,f=1,k=0;a<c;++a)b.fAllBits[k]&&f&&(a<=this.x.nbins?this.hist.fArray[a+1]+=d:this.hist.fArray[this.x.nbins+1]+=d),f*=2,256<=f&&(f=1,++k)};e.prototype.FillBitsHistogram=function(b,a){if(a)for(var c=0,d=1;c<this.x.nbins;++c)b&d&&(this.hist.fArray[c+
1]+=a),d*=2};e.prototype.fill1DHistogram=function(b,a){var c=this.x.GetBin(b);this.hist.fArray[c]+=a;this.x.lbls||(this.hist.fTsumw+=a,this.hist.fTsumwx+=a*b,this.hist.fTsumwx2+=a*b*b)};e.prototype.fill2DHistogram=function(b,a,c){var d=this.x.GetBin(b),f=this.y.GetBin(a);this.hist.fArray[d+(this.x.nbins+2)*f]+=c;this.x.lbls||this.y.lbls||(this.hist.fTsumw+=c,this.hist.fTsumwx+=c*b,this.hist.fTsumwy+=c*a,this.hist.fTsumwx2+=c*b*b,this.hist.fTsumwxy+=c*b*a,this.hist.fTsumwy2+=c*a*a)};e.prototype.fill3DHistogram=
function(b,a,c,e){var d=this.x.GetBin(b),k=this.y.GetBin(a),h=this.z.GetBin(c);this.hist.fArray[d+(this.x.nbins+2)*(k+(this.y.nbins+2)*h)]+=e;this.x.lbls||this.y.lbls||this.z.lbls||(this.hist.fTsumw+=e,this.hist.fTsumwx+=e*b,this.hist.fTsumwy+=e*a,this.hist.fTsumwz+=e*c,this.hist.fTsumwx2+=e*b*b,this.hist.fTsumwy2+=e*a*a,this.hist.fTsumwz2+=e*c*c,this.hist.fTsumwxy+=e*b*a,this.hist.fTsumwxz+=e*b*c,this.hist.fTsumwyz+=e*a*c)};e.prototype.dumpValues=function(b,a,c,e){switch(this.ndim){case 1:var d=
{x:b,weight:a};break;case 2:d={x:b,y:a,weight:c};break;case 3:d={x:b,y:a,z:c,weight:e}}this.cut.is_dummy()&&(1===this.ndim?d=b:delete d.weight);this.hist.push(d)};e.prototype.ProcessArraysFunc=function(){if(this.arr_limit||this.graph){var b=this.vars[0],a=this.tgtarr.br0.length,c=this.vars[1],e=this.vars[2];if(0===b.buf.length&&a>=this.arr_limit&&!this.graph)b.buf=this.tgtarr.br0,c&&(c.buf=this.tgtarr.br1),e&&(e.buf=this.tgtarr.br2);else for(var f=0;f<a;++f)b.buf.push(this.tgtarr.br0[f]),c&&c.buf.push(this.tgtarr.br1[f]),
e&&e.buf.push(this.tgtarr.br2[f]);b.kind="number";c&&(c.kind="number");e&&(e.kind="number");this.cut.buf=null;!this.graph&&b.buf.length>=this.arr_limit&&(this.createHistogram(),this.arr_limit=0)}else switch(b=this.tgtarr.br0,a=b.length,this.ndim){case 1:for(c=0;c<a;++c)this.fill1DHistogram(b[c],1);break;case 2:c=this.tgtarr.br1;for(e=0;e<a;++e)this.fill2DHistogram(b[e],c[e],1);break;case 3:for(c=this.tgtarr.br1,e=this.tgtarr.br2,f=0;f<a;++f)this.fill3DHistogram(b[f],c[f],e[f],1)}};e.prototype.ProcessDump=
function(){var b=this.leaf?this.tgtobj.br0[this.leaf]:this.tgtobj.br0;b&&this.copy_fields?0===t(b)?this.hist.push(JSROOT.extend({},b)):this.hist.push(b):this.hist.push(b)};e.prototype.Process=function(b){this.globals.entry=b;this.cut.produce(this.tgtobj);if(this.dump_values||this.cut.value){for(b=0;b<this.ndim;++b)this.vars[b].produce(this.tgtobj);b=this.vars[0];var a=this.vars[1],c=this.vars[2],e=this.cut;if(this.graph||this.arr_limit){switch(this.ndim){case 1:for(a=0;a<b.length;++a)b.buf.push(b.get(a)),
e.buf.push(e.value);break;case 2:for(c=0;c<b.length;++c)for(var f=0;f<a.length;++f)b.buf.push(b.get(c)),a.buf.push(a.get(f)),e.buf.push(e.value);break;case 3:for(f=0;f<b.length;++f)for(var k=0;k<a.length;++k)for(var h=0;h<c.length;++h)b.buf.push(b.get(f)),a.buf.push(a.get(k)),c.buf.push(c.get(h)),e.buf.push(e.value)}!this.graph&&b.buf.length>=this.arr_limit&&(this.createHistogram(),this.arr_limit=0)}else if(this.hist)switch(this.ndim){case 1:for(a=0;a<b.length;++a)this.fill1DHistogram(b.get(a),e.value);
break;case 2:for(c=0;c<b.length;++c)for(f=0;f<a.length;++f)this.fill2DHistogram(b.get(c),a.get(f),e.value);break;case 3:for(f=0;f<b.length;++f)for(k=0;k<a.length;++k)for(h=0;h<c.length;++h)this.fill3DHistogram(b.get(f),a.get(k),c.get(h),e.value)}this.monitoring&&this.hist&&!this.dump_values&&(b=(new Date).getTime(),b-this.lasttm>this.monitoring&&(this.lasttm=b,this.progress_callback&&this.progress_callback(this.hist)))}};e.prototype.Terminate=function(b){b&&!this.hist&&this.createHistogram();this.ShowProgress();
this.result_callback&&this.result_callback(this.hist)};JSROOT.treeHierarchy=function(b,a){function c(b,a,d,e){function f(b){var a=b.indexOf("[");0<a&&(b=b.substr(0,a));e&&0==b.indexOf(e.fName)&&(b=b.substr(e.fName.length),"."===b[0]&&(b=b.substr(1)));return b}if(!b||!a)return!1;var g=a.fBranches?a.fBranches.arr.length:0,k=a.fLeaves?a.fLeaves.arr.length:0;a.$tree=d;d={_name:f(a.fName),_kind:"ROOT."+a._typename,_title:a.fTitle,_obj:a};b._childs||(b._childs=[]);b._childs.push(d);"TBranchElement"===a._typename&&
(d._title+=" from "+a.fClassName+";"+a.fClassVersion);if(0<g)d._more=!0,d._expand=function(b,a){if(!a)return!1;b._childs||(b._childs=[]);!a.fLeaves||1!==a.fLeaves.arr.length||a.fType!==JSROOT.BranchType.kClonesNode&&a.fType!==JSROOT.BranchType.kSTLNode||(a.fLeaves.arr[0].$branch=a,b._childs.push({_name:"@size",_title:"container size",_kind:"ROOT.TLeafElement",_icon:"img_leaf",_obj:a.fLeaves.arr[0],_more:!1}));for(var d=0;d<a.fBranches.arr.length;++d)c(b,a.fBranches.arr[d],a.$tree,a);var f=(d=A(a,
a.$tree,!0))?JSROOT.getMethods(d):null;if(f&&0<a.fBranches.arr.length)for(var g in f)if("function"===typeof f[g]){var e=f[g].toString();0<e.indexOf("return")&&0==e.indexOf("function ()")&&b._childs.push({_name:g+"()",_title:"function "+g+" of class "+d,_kind:"ROOT.TBranchFunc",_obj:{_typename:"TBranchFunc",branch:a,func:g},_more:!1})}return!0};else if(1===k)d._icon="img_leaf",d._more=!1;else if(1<k)for(d._childs=[],b=0;b<k;++b)a.fLeaves.arr[b].$branch=a,g={_name:f(a.fLeaves.arr[b].fName),_kind:"ROOT."+
a.fLeaves.arr[b]._typename,_obj:a.fLeaves.arr[b]},d._childs.push(g);return!0}if("TTree"!=a._typename&&"TNtuple"!=a._typename&&"TNtupleD"!=a._typename)return!1;b._childs=[];b._tree=a;for(var d=0;d<a.fBranches.arr.length;++d)c(b,a.fBranches.arr[d],a);return!0};JSROOT.drawTree=function(b,a,c){if(!JSROOT.ObjectPainter)return console.error("JSROOT.drawTree called without loading of JSRoot.painter.js - how it can happen?"),null;var d=new JSROOT.ObjectPainter(b,a),f=a,e=c;if("TBranchFunc"==a._typename)e=
{expr:"."+a.func+"()",branch:a.branch},c&&0==c.indexOf("dump")?e.expr+=">>"+c:c&&(e.expr+=c),f=a.branch.$tree;else if(a.$branch){e={expr:"."+a.fName+(c||""),branch:a.$branch};if(e.branch.fType===JSROOT.BranchType.kClonesNode||e.branch.fType===JSROOT.BranchType.kSTLNode)e.expr=c,e.direct_branch=!0;f=a.$branch.$tree}else if(a.$tree)!c&&a.fStreamerType&&a.fStreamerType!==JSROOT.IO.kTString&&a.fStreamerType>=JSROOT.IO.kObject&&a.fStreamerType<=JSROOT.IO.kAnyP&&(c="dump"),e={expr:c,branch:a},f=a.$tree;
else{if("player"===e||!e)return JSROOT.require("jq2d").then(function(){JSROOT.createTreePlayer(d);d.configureTree(f);d.Show();return d});"string"===typeof e&&(e={expr:e})}if(!f)return console.error("No TTree object available for TTree::Draw"),null;JSROOT.cleanup(b);var h=0,q,m=function(a,c){if(e.player)2===h&&(g=d.drawid);else var g=b;if(g)return JSROOT.redraw(g,a);if(1===h)return c?null:new Promise(function(a){q=a});h=1;return JSROOT.require("jq2d").then(function(){JSROOT.createTreePlayer(d);d.configureTree(f);
d.Show(e);h=2;return JSROOT.redraw(d.drawid,a).then(function(a){d.setItemName("TreePlayer");q&&q(a);return a})})};e.progress=function(a){return m(a,!0)};return f.Draw(e).then(function(a){return m(a)})};JSROOT.TSelector=h;JSROOT.TDrawVariable=r;JSROOT.TDrawSelector=e;a.TTreeMethods={Process:function(b,d){function c(b,c){switch(b._typename){case "TLeafF":var d=a.kFloat;break;case "TLeafD":d=a.kDouble;break;case "TLeafO":d=a.kBool;break;case "TLeafB":d=b.fIsUnsigned?a.kUChar:a.kChar;break;case "TLeafS":d=
b.fIsUnsigned?a.kUShort:a.kShort;break;case "TLeafI":d=b.fIsUnsigned?a.kUInt:a.kInt;break;case "TLeafL":d=b.fIsUnsigned?a.kULong64:a.kLong64;break;case "TLeafC":d=a.kTString;break;default:return null}return a.createStreamerElement(c||b.fName,d)}function e(a){for(var b=0;b<g.arr.length;++b)if(g.arr[b].branch===a)return g.arr[b];return null}function f(b,h,k,m){function q(a,c,d){if(!a||!a.arr.length)return!0;var e=b.fName;"."===e[e.length-1]&&(e=e.substr(0,e.length-1));"string"===typeof m&&"."==m[0]&&
(e+=m);e+=".";for(var l=0;l<a.arr.length;++l){var p=a.arr[l];if(!(0<d&&p.fType!==d))if(p.fType===JSROOT.BranchType.kBaseClassNode){if(!q(p.fBranches,c,d))return!1}else{var n=F(p,g.file);if(n&&"BASE"===n.fTypeName){if(p.fTotBytes&&!f(p,h,k,m)||!q(p.fBranches,c,d))return!1}else{n=p.fName;var v=1;if(0===p.fName.indexOf(e))n=n.substr(e.length);else if(0<d)continue;var B=n.indexOf("[");0<B&&(n=n.substr(0,B));B=n.indexOf("<");0<B&&(n=n.substr(0,B));0<d&&(v="$child$",B=n.indexOf("."),0<B&&(v=L(a,b.fName+
"."+n.substr(0,B+1),l)||"TObject"));if(!f(p,c,n,v))return!1}}}return!0}"string"===typeof b&&(b=g.tree.FindBranch(b));if(!b)return console.error("Did not found branch"),null;var p=e(b);if(p)return console.error("Branch already configured for reading",b.fName),p.tgt!==h&&console.error("Target object differs"),null;if(!b.fEntries)return console.warn("Branch ",b.fName," does not have entries"),null;for(p={branch:b,tgt:h,name:k,index:-1,member:null,type:0,curr_entry:-1,raw:null,basket:null,curr_basket:0,
read_entry:-1,staged_entry:-1,first_readentry:-1,staged_basket:0,numentries:b.fEntries,numbaskets:b.fWriteBasket,counters:null,ascounter:[],baskets:[],staged_prev:0,staged_now:0,progress_showtm:0,GetBasketEntry:function(b){if(!this.branch||b>this.branch.fMaxBaskets)return 0;var a=b<this.branch.fMaxBaskets?this.branch.fBasketEntry[b]:0;return a?a:(a=0<b?this.branch.fBaskets.arr[b-1]:null)?this.branch.fBasketEntry[b-1]+a.fNevBuf:0},GetTarget:function(b){if(!this.tgt)return b;for(var a=0;a<this.tgt.length;++a){var c=
this.tgt[a];b[c.name]||(b[c.name]=c.lst.Create());b=b[c.name]}return b},GetEntry:function(b){b-=this.first_entry;this.branch.TestBit(a.BranchBits.kDoNotUseBufferMap)||this.raw.clearObjectMap();if(this.basket.fEntryOffset){var c=this.basket.fEntryOffset[b];this.basket.fDisplacement&&(this.raw.fDisplacement=this.basket.fDisplacement[b])}else c=this.basket.fKeylen+this.basket.fNevBufSize*b;this.raw.locate(c-this.raw.raw_shift)}};p.GetBasketEntry(p.numbaskets+1);)p.numbaskets++;var n=b.fLeaves?b.fLeaves.arr.length:
0,w=0<n?b.fLeaves.arr[0]:null,v=null,l=null,E="TBranchElement"===b._typename,J=0,u=null,r=null,x="";if(b.fBranchCount){(u=e(b.fBranchCount))||(u=f(b.fBranchCount,h,"$counter"+t++,!0));if(!u)return console.error("Cannot add counter branch",b.fBranchCount.fName),null;x=b.fBranchCount2;if(!x&&b.fBranchCount.fStreamerType===a.kSTL&&(b.fStreamerType===a.kStreamLoop||b.fStreamerType===a.kOffsetL+a.kStreamLoop)){var K=F(b,g.file),I=b.fBranchCount.fBranches.arr;if(K&&K.fCountName&&I)for(var y=0;y<I.length;++y)if(I[y].fName===
b.fBranchCount.fName+"."+K.fCountName){x=I[y];break}x||console.error("Did not found branch for second counter of kStreamLoop element")}if(x&&((r=e(x))||(r=f(x,h,"$counter"+t++,!0)),!r))return console.error("Cannot add counter branch2",x.fName),null}else if(1===n&&w&&w.fLeafCount&&(x=g.tree.FindBranch(w.fLeafCount.fName))&&((u=e(x))||(u=f(x,h,"$counter"+t++,!0)),!u))return console.error("Cannot add counter branch",x.fName),null;if("TBranchObject"===b._typename)l={name:k,typename:b.fClassName,virtual:w.fVirtual,
func:function(b,a){var c=this.typename;this.virtual&&(c=b.readFastString(b.ntou1()+1));a[this.name]=b.classStreamer({},c)}};else if(b.fType===JSROOT.BranchType.kClonesNode||b.fType===JSROOT.BranchType.kSTLNode){if(v=a.createStreamerElement(k,a.kInt),!m||"string"===typeof m&&"."===m[0]||1===m){g.process_arrays=!1;l={name:k,conttype:b.fClonesName||"TObject",reallocate:d.reallocate_objects,func:function(b,a){b=b.ntoi4();var c=0,d=a[this.name];!d||this.reallocate?d=a[this.name]=Array(b):(c=d.length,d.length=
b);for(;c<b;)d[c++]=this.methods.Create()}};if("string"===typeof m&&"."===m[0]&&(l.conttype=L(b.fBranches,b.fName+m),!l.conttype))return console.error("Cannot select object",m,"in the branch",b.fName),null;l.methods=G(l.conttype);J=b.fType===JSROOT.BranchType.kClonesNode?JSROOT.BranchType.kClonesMemberNode:JSROOT.BranchType.kSTLMemberNode}}else{if(x=A(b,g.tree)){if(!0===m)return console.warn("Object branch "+x+" can not have data to be read directly"),null;g.process_arrays=!1;v=Array(h?h.length+1:
1);for(l=0;l<v.length-1;++l)v[l]=h[l];v[v.length-1]={name:k,lst:G(x)};return q(b.fBranches,v,0)?p:null}if(E&&1===n&&w.fName===b.fName&&-1==b.fID)v=a.createStreamerElement(k,b.fClassName),v.fType===a.kAny&&((n=g.file.getStreamer(b.fClassName,{val:b.fClassVersion,checksum:b.fCheckSum}))?l={name:k,typename:b.fClassName,streamer:n,func:function(b,a){for(var c={_typename:this.typename},d=0;d<this.streamer.length;++d)this.streamer[d].func(b,c);a[this.name]=c}}:(v=null,console.warn("not found streamer!")));
else if(E&&1>=n)v=F(b,g.file),!v&&b.fStreamerType&&20>b.fStreamerType&&(v=a.createStreamerElement(k,b.fStreamerType));else if(1===n)v=c(w,k);else if("TBranch"===b._typename&&1<n){w=Array(n);E=!0;for(x=0;x<n;++x)w[x]=c(b.fLeaves.arr[x]),w[x]=a.createMember(w[x],g.file),w[x]||(E=!1);E&&(l={name:k,leaves:w,func:function(b,a){var c=a[this.name],d=0;for(c||(a[this.name]=c={});d<this.leaves.length;)this.leaves[d++].func(b,c)}})}}if(!v&&!l)return console.warn("Not supported branch kind",b.fName,b._typename),
null;l||(l=a.createMember(v,g.file),void 0!==l.base&&l.basename&&(l.func=function(b,a){a[this.name]||(a[this.name]={_typename:this.basename});b.classStreamer(a[this.name],this.basename)}));if(u&&"string"===typeof m){l.name0=u.name;var z=k.split(".");if(1===z.length)l.get=function(b,a){return b[a]};else{if("$child$"===m)return console.error("target name contains point, but suppose to be direct child",k),null;if(2===z.length)k=l.name=z[1],l.name1=z[0],l.subtype1=m,l.methods1=G(l.subtype1),l.get=function(b,
a){var c=b[a][this.name1];c||(c=b[a][this.name1]=this.methods1.Create());return c};else{if(!b.fParentName)return console.error("Not possible to provide more than 2 parts in the target name",k),null;k=l.name=z.pop();l.snames=z;l.smethods=[];w=b.fParentName;for(n=0;n<z.length;++n)w=C(g.file,w,z[n]),l.smethods[n]=G(w||"AbstractClass");l.get=function(b,a){var c=b[a][this.snames[0]];c||(c=b[a][this.snames[0]]=this.smethods[0].Create());for(b=1;b<this.snames.length;++b)(a=c[this.snames[b]])||(a=c[this.snames[b]]=
this.smethods[b].Create()),c=a;return c}}}l.objs_branch_func?l.func=l.objs_branch_func:(l.func0=l.func,l.func=function(b,a){a=a[this.name0];for(var c=0;c<a.length;)this.func0(b,this.get(a,c++))})}else if(u)if(g.process_arrays=!1,v.fType===a.kDouble32||v.fType===a.kFloat16)l.stl_size=u.name,l.func=function(b,a){a[this.name]=this.readarr(b,a[this.stl_size])};else if(v.fType!==a.kOffsetP+a.kDouble32&&v.fType!==a.kOffsetP+a.kFloat16||!b.fBranchCount2)if(0<v.fType&&v.fType<a.kOffsetL||v.fType===a.kTString||
v.fType>a.kOffsetP&&v.fType<a.kOffsetP+a.kOffsetL&&b.fBranchCount2)l={name:k,stl_size:u.name,type:v.fType,func:function(b,a){a[this.name]=b.readFastArray(a[this.stl_size],this.type)}},b.fBranchCount2&&(l.type-=a.kOffsetP,l.arr_size=r.name,l.func=function(b,a){for(var c=a[this.stl_size],d=a[this.arr_size],e=Array(c),f=0;f<c;++f)e[f]=1===b.ntou1()?b.readFastArray(d[f],this.type):[];a[this.name]=e});else if(v.fType>a.kOffsetP&&v.fType<a.kOffsetP+a.kOffsetL&&l.cntname)l.cntname=u.name;else if(v.fType==
a.kStreamer){if(r)throw Error("Second branch counter not supported yet with jsrio.kStreamer");l.func=l.branch_func;l.stl_size=u.name}else if(v.fType===a.kStreamLoop||v.fType===a.kOffsetL+a.kStreamLoop)r?(l.stl_size=u.name,l.cntname=r.name,l.func=l.branch_func):l.cntname=u.name;else{l.name="$stl_member";if(r)if(l.cntname)z=r.name,l.cntname="$loop_size";else throw Error("Second branch counter not used - very BAD");l={name:k,stl_size:u.name,loop_size:z,member0:l,func:function(b,a){for(var c=a[this.stl_size],
d=Array(c),e=0;e<c;++e)this.loop_size&&(a.$loop_size=a[this.loop_size][e]),this.member0.func(b,a),d[e]=a.$stl_member;delete a.$stl_member;delete a.$loop_size;a[this.name]=d}}}else l.stl_size=u.name,l.arr_size=r.name,l.func=function(b,a){for(var c=a[this.stl_size],d=a[this.arr_size],e=Array(c),f=0;f<c;++f)e[f]=1===b.ntou1()?this.readarr(b,d[f]):[];a[this.name]=e};l.name=k;p.member=l;v&&(p.type=v.fType);p.index=g.arr.length;u&&(p.counters=[u.index],u.ascounter.push(p.index),r&&(p.counters.push(r.index),
r.ascounter.push(p.index)));g.arr.push(p);return J&&!q(b.fBranches,h,J)?null:p}function h(b){function c(){for(var a=[],c="",d=0;d<b.length;++d)if(!b[d].done){var e=b[d].branch;if(0===a.length)c=e.fFileName;else if(c!==e.fFileName)continue;b[d].selected=!0;a.push(e.fBasketSeek[b[d].basket],e.fBasketBytes[b[d].basket])}return 0<a.length?{places:a,filename:c}:null}function d(b){if(!(g.staged_prev===g.staged_now||g.process_max<=g.process_min)){var a=(new Date).getTime();500>a-g.progress_showtm||(g.progress_showtm=
a,g.selector.ShowProgress((g.staged_prev+b*(g.staged_now-g.staged_prev))/(g.process_max-g.process_min)))}}function e(f,h){function k(h){for(var l={};h<b.length;l={$jscomp$loop$prop$buf$41:l.$jscomp$loop$prop$buf$41,$jscomp$loop$prop$basket$42:l.$jscomp$loop$prop$basket$42},++h)if(b[h].selected){b[h].selected=!1;b[h].done=!0;var m=f.shift();l.$jscomp$loop$prop$buf$41=new JSROOT.TBuffer(m,0,g.file);l.$jscomp$loop$prop$basket$42=l.$jscomp$loop$prop$buf$41.classStreamer({},"TBasket");l.$jscomp$loop$prop$basket$42.fNbytes!==
b[h].branch.fBasketBytes[b[h].basket]&&console.error("mismatch in read basket sizes",b[h].branch.fBasketBytes[b[h].basket]);b[h].bskt_obj=l.$jscomp$loop$prop$basket$42;if(l.$jscomp$loop$prop$basket$42.fKeylen+l.$jscomp$loop$prop$basket$42.fObjlen===l.$jscomp$loop$prop$basket$42.fNbytes)l.$jscomp$loop$prop$buf$41.raw_shift=0,b[h].raw=l.$jscomp$loop$prop$buf$41,0<b[h].branch.fEntryOffsetLen&&l.$jscomp$loop$prop$buf$41.readBasketEntryOffset(l.$jscomp$loop$prop$basket$42,l.$jscomp$loop$prop$buf$41.raw_shift);
else return a.R__unzip(m,l.$jscomp$loop$prop$basket$42.fObjlen,!1,l.$jscomp$loop$prop$buf$41.o).then(function(a){return function(c){if(c)a.$jscomp$loop$prop$buf$41=new JSROOT.TBuffer(c,0,g.file),a.$jscomp$loop$prop$buf$41.raw_shift=a.$jscomp$loop$prop$basket$42.fKeylen,a.$jscomp$loop$prop$buf$41.fTagOffset=a.$jscomp$loop$prop$basket$42.fKeylen;else throw Error("FAIL TO UNPACK");b[h].raw=a.$jscomp$loop$prop$buf$41;0<b[h].branch.fEntryOffsetLen&&a.$jscomp$loop$prop$buf$41.readBasketEntryOffset(a.$jscomp$loop$prop$basket$42,
a.$jscomp$loop$prop$buf$41.raw_shift);return k(h+1)}}(l))}return(l=c())?g.file.readBuffer(l.places,l.filename,d).then(function(b){return e(b)}).catch(function(){return null}):Promise.resolve(b)}if(!f||2<h.length&&2*f.length!==h.length)return Promise.resolve(null);2==h.length&&(f=[f]);return k(0)}var f=c();return f?g.file.readBuffer(f.places,f.filename,d).then(function(b){return e(b,f.places)}).catch(function(){return null}):Promise.resolve(null)}function q(){for(var b=0,a=[],c=!0,d=!1,e=g.process_max;1E6>
b&&c;){c=!1;for(var f=g.arr.length-1;0<=f;--f)for(var k=g.arr[f];k.staged_basket<k.numbaskets;){var m=k.staged_basket++;if(k.GetBasketEntry(m)>=g.process_max)break;if(0>k.first_readentry){if(k.GetBasketEntry(m+1)<=g.process_min)continue;k.curr_basket=m;k.first_readentry=k.GetBasketEntry(m)}var p={id:f,branch:k.branch,basket:m,raw:null},l=k.branch.fBaskets.arr[m];l?(p.raw=l.fBufferRef,p.raw?p.raw.locate(0):p.raw=new JSROOT.TBuffer(null,0,g.file),p.raw.raw_shift=l.fKeylen,l.fBufferRef&&0<k.branch.fEntryOffsetLen&&
p.raw.readBasketEntryOffset(l,p.raw.raw_shift),p.bskt_obj=l,d=!0,k.baskets[m]=p):(a.push(p),b+=k.branch.fBasketBytes[m],c=!0);k.staged_entry=k.GetBasketEntry(m+1);e=Math.min(e,k.staged_entry);break}}if(0===b&&!d)return g.selector.Terminate(!0),D(g.selector);g.staged_prev=g.staged_now;g.staged_now=e;c=0;g.process_max>g.process_min&&(c=(g.staged_prev-g.process_min)/(g.process_max-g.process_min));g.selector.ShowProgress(c);g.progress_showtm=(new Date).getTime();if(0<b)return h(a).then(n);if(d)return n([]);
throw Error("No any data is requested - never come here");}function n(b){if(0!==g.selector.break_execution||null===b)return g.selector.Terminate(!1),D(g.selector);for(var a=0;a<b.length;++a)g.arr[b[a].id].baskets[b[a].basket]=b[a];for(b=!1;;){a=1E8;var c;for(c=0;c<g.arr.length;++c){var d=g.arr[c];if(!d.raw||!d.basket||d.first_entry+d.basket.fNevBuf<=g.current_entry){delete d.raw;delete d.basket;if(d.curr_basket>=d.numbaskets){if(0==c)return g.selector.Terminate(!0),D(g.selector);continue}var e=d.baskets[d.curr_basket];
if(!e)return b?q():(g.selector.Terminate(!1),M(Error("no data for "+d.branch.fName+" basket "+d.curr_basket)));d.raw=e.raw;d.basket=e.bskt_obj;d.first_entry=d.GetBasketEntry(e.basket);e.raw=null;e.branch=null;e.bskt_obj=null;d.baskets[d.curr_basket++]=void 0}a=Math.min(a,d.first_entry+d.basket.fNevBuf-g.current_entry)}g.current_entry+a>g.process_max&&(a=g.process_max-g.current_entry);if(g.process_arrays&&1<a){for(c=0;c<g.arr.length;++c)d=g.arr[c],d.GetEntry(g.current_entry),d.arrmember.arrlength=
a,d.arrmember.func(d.raw,g.selector.tgtarr),d.raw=null;g.selector.ProcessArrays(g.current_entry);g.current_entry+=a;b=!0}else for(;a--;){for(c=0;c<g.arr.length;++c)d=g.arr[c],d.GetEntry(g.current_entry),d.member.func(d.raw,d.GetTarget(g.selector.tgtobj));g.selector.Process(g.current_entry);g.current_entry++;b=!0}if(g.current_entry>=g.process_max)return g.selector.Terminate(!0),D(g.selector)}}var m=this;d||(d={});if(!b||!this.$file||!b.branches)return b&&b.Terminate(!1),Promise.reject(Error("required parameter missing for TTree::Process"));
for(var g={tree:this,file:this.$file,selector:b,arr:[],curr:-1,current_entry:-1,simple_read:!0,process_arrays:!0},t=0,p=0;p<b.branches.length;++p)if(!f(b.branches[p],void 0,b.names[p],b.directs[p]))return b.Terminate(!1),Promise.reject(Error("Fail to add branch ${selector.branches[nn]}"));for(p=1;p<g.arr.length&&g.simple_read;++p){var y=g.arr[p],r=g.arr[0];if(y.numentries!==r.numentries||y.numbaskets!==r.numbaskets)g.simple_read=!1;for(var H=0;H<y.numbaskets;++H)y.GetBasketEntry(H)!==r.GetBasketEntry(H)&&
(g.simple_read=!1)}for(p=g.firstentry=g.lastentry=0;p<g.arr.length;++p)y=g.arr[p].branch,r=y.fFirstEntry,void 0===r&&(r=y.fBasketBytes[0]?y.fBasketEntry[0]:0),g.firstentry=Math.max(g.firstentry,r),g.lastentry=0===p?r+y.fEntries:Math.min(g.lastentry,r+y.fEntries);if(g.firstentry>=g.lastentry)return b.Terminate(!1),Promise.reject(Error("No any common events for selected branches"));g.process_min=g.firstentry;g.process_max=g.lastentry;var D,M;!isNaN(d.firstentry)&&d.firstentry>g.firstentry&&d.firstentry<
g.lastentry&&(g.process_min=d.firstentry);g.current_entry=g.staged_now=g.process_min;!isNaN(d.numentries)&&0<d.numentries&&(p=g.process_min+d.numentries,p<g.process_max&&(g.process_max=p));if("function"===typeof b.ProcessArrays&&g.simple_read){for(p=0;p<g.arr.length;++p)if(y=g.arr[p],0>=y.type||y.type>=a.kOffsetL||y.type===a.kCharStar)g.process_arrays=!1;if(g.process_arrays)for(b.tgtarr={},b=0;b<g.arr.length;++b)p=g.arr[b],y=a.createStreamerElement(p.name,p.type),y.fType=p.type+a.kOffsetL,y.fArrayLength=
10,y.fArrayDim=1,y.fMaxIndex[0]=10,p.arrmember=a.createMember(y,g.file)}else g.process_arrays=!1;return new Promise(function(b,a){D=b;M=a;g.selector.Begin(m);q()})},FindBranchComplex:function(b,a,c){var d=!1,e=b,h=null;if(void 0===a){d=!0;a=this.fBranches;var n=e.indexOf("[");0<n&&(e=e.substr(0,n))}if(!a||0===a.arr.length)return null;for(n=0;n<a.arr.length;++n){var q=a.arr[n].fName;"]"==q[q.length-1]&&(q=q.substr(0,q.indexOf("[")));if(0!==e.indexOf(q)&&0<q.indexOf("<")){var m=q.indexOf("<"),g=q.lastIndexOf(">");
q=q.substr(0,m)+q.substr(g+1)}if(q===e){h={branch:a.arr[n],rest:""};break}if(0===e.indexOf(q)&&(m=q.length,"."===q[m-1]&&m--,"."===e[m])){(h=this.FindBranchComplex(e,a.arr[n].fBranches))||(h=this.FindBranchComplex(e.substr(m+1),a.arr[n].fBranches));h||(h={branch:a.arr[n],rest:e.substr(m)});break}}if(d&&!c&&!h&&0==e.indexOf("br_")){for(a=3;a<e.length&&"0"<=e[a]&&"9">=e[a];)++a;(c=3<a?this.GetBranch(parseInt(e.slice(3,a))):null)&&(h={branch:c,rest:e.substr(a)})}if(!d||!h)return h;b.length>e.length&&
(h.rest+=b.substr(e.length));return h},FindBranch:function(b){b=this.FindBranchComplex(b,void 0,!0);return!b||0<b.rest.length?null:b.branch},GetNumBranches:function(){function b(a){if(!a||!a.fBranches)return 0;var c=0;a.fBranches.arr.forEach(function(a){return c+=b(a)});return a.fBranches.arr.length+c}return b(this)},GetBranch:function(b){function a(d){d&&d.fBranches&&d.fBranches.arr.forEach(function(d){e++===b&&(c=d);c||a(d)})}if(void 0!==b&&!isNaN(b)){var c,e=0;a(this);return c}},Draw:function(b){var a=
this;"string"===typeof b&&(b={expr:b});b.expr||(b.expr="");if("testio"===b.expr)return this.IOTest(b);var c=new e;b.branch?c.drawOnlyBranch(this,b.branch,b.expr,b)||(c=null):c.parseDrawExpression(this,b)||(c=null);return c?new Promise(function(d){c.setCallback(d,b.progress);a.Process(c,b)}):Promise.reject(Error("Fail to create selector for specified expression"))},IOTest:function(b){function a(c,d){if(!c||!c.fBranches)return 0;for(var e=0,f=0;f<c.fBranches.arr.length;++f){var g=c.fBranches.arr[f],
h=(d?d+"/":"")+g.fName;b.branches.push(g);b.names.push(h);b.nchilds.push(0);var k=b.nchilds.length-1;e+=g.fLeaves?g.fLeaves.arr.length:0;g=a(g,h);e+=g;b.nchilds[k]=g}return e}var c=this;b.branches=[];b.names=[];b.nchilds=[];b.nbr=0;var e=a(this);b.names.push("Total are "+b.branches.length+" branches with "+e+" leaves");b.lasttm=(new Date).getTime();b.lastnbr=0;var f=function(){var a=new h;a.addBranch(b.branches[b.nbr],"br0");a.Process=function(){void 0===this.tgtobj.br0&&(this.fail=!0)};a.Terminate=
function(a){"string"!==typeof a&&(a=!a||this.fails?"FAIL":"ok");b.names[b.nbr]=a+" "+b.names[b.nbr];b.nbr++;if(b.nbr>=b.branches.length)return JSROOT.Painter&&JSROOT.Painter.showProgress(),b.resolveFunc(b.names);a=(new Date).getTime();5E3<a-b.lasttm||50<b.nbr-b.lastnbr?(b.lasttm=a,b.lastnbr=b.nbr,setTimeout(f,1)):f()};JSROOT.Painter&&JSROOT.Painter.showProgress("br "+b.nbr+"/"+b.branches.length+" "+b.names[b.nbr]);var d=b.branches[b.nbr],e=A(d,c),m=d.fEntries,g=!d.fLeaves||0===d.fLeaves.arr.length;
e&&(g=100<b.nchilds[b.nbr]);if(g||0>=m)a.Terminate("ignore");else{e={numentries:10};g=d.fFirstEntry||0;var n=d.fEntryNumber||g+m;m<e.numentries?e.numentries=m:e.firstentry=g+Math.round((n-g-e.numentries)*Math.random());console.log("test branch",d.fName,"first",e.firstentry||0,"num",e.numentries);c.Process(a,e)}};return new Promise(function(a){b.resolveFunc=a;f()})}};return JSROOT});
