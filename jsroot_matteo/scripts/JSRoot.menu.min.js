var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(h){var k=0;return function(){return k<h.length?{done:!1,value:h[k++]}:{done:!0}}};$jscomp.arrayIterator=function(h){return{next:$jscomp.arrayIteratorImpl(h)}};$jscomp.makeIterator=function(h){var k="undefined"!=typeof Symbol&&Symbol.iterator&&h[Symbol.iterator];return k?k.call(h):$jscomp.arrayIterator(h)};
$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global&&null!=global?global:h};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,k,l){h!=Array.prototype&&h!=Object.prototype&&(h[k]=l.value)};
$jscomp.polyfill=function(h,k,l,m){if(k){l=$jscomp.global;h=h.split(".");for(m=0;m<h.length-1;m++){var f=h[m];f in l||(l[f]={});l=l[f]}h=h[h.length-1];m=l[h];k=k(m);k!=m&&null!=k&&$jscomp.defineProperty(l,h,{configurable:!0,writable:!0,value:k})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(h){function k(){this.batch_=null}function l(b){return b instanceof f?b:new f(function(a,c){a(b)})}if(h&&!$jscomp.FORCE_POLYFILL_PROMISE)return h;k.prototype.asyncExecute=function(b){if(null==this.batch_){this.batch_=[];var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})}this.batch_.push(b)};var m=$jscomp.global.setTimeout;k.prototype.asyncExecuteFunction=function(b){m(b,0)};k.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=
this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var c=b[a];b[a]=null;try{c()}catch(e){this.asyncThrow_(e)}}}this.batch_=null};k.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var f=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(c){b.reject(c)}};f.prototype.createResolveAndReject_=function(){function a(a){return function(b){c||(c=!0,a.call(d,b))}}var d=this,c=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};f.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof f)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};f.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(c){this.reject_(c);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};f.prototype.reject_=function(a){this.settle_(2,a)};f.prototype.fulfill_=function(a){this.settle_(1,a)};f.prototype.settle_=function(a,d){if(0!=this.state_)throw Error("Cannot settle("+a+", "+d+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=d;this.executeOnSettledCallbacks_()};f.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=0;b<this.onSettledCallbacks_.length;++b)a.asyncExecute(this.onSettledCallbacks_[b]);
this.onSettledCallbacks_=null}};var a=new k;f.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};f.prototype.settleSameAsThenable_=function(a,d){var b=this.createResolveAndReject_();try{a.call(d,b.resolve,b.reject)}catch(e){b.reject(e)}};f.prototype.then=function(a,d){function b(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(n){g(n)}}:b}var e,g,p=new f(function(a,b){e=a;g=b});this.callWhenSettled_(b(a,e),b(d,g));return p};
f.prototype.catch=function(a){return this.then(void 0,a)};f.prototype.callWhenSettled_=function(b,d){function c(){switch(e.state_){case 1:b(e.result_);break;case 2:d(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?a.asyncExecute(c):this.onSettledCallbacks_.push(c)};f.resolve=l;f.reject=function(a){return new f(function(b,c){c(a)})};f.race=function(a){return new f(function(b,c){for(var d=$jscomp.makeIterator(a),g=d.next();!g.done;g=d.next())l(g.value).callWhenSettled_(b,
c)})};f.all=function(a){var b=$jscomp.makeIterator(a),c=b.next();return c.done?l([]):new f(function(a,d){function g(b){return function(c){e[b]=c;f--;0==f&&a(e)}}var e=[],f=0;do e.push(void 0),f++,l(c.value).callWhenSettled_(g(e.length-1),d),c=b.next();while(!c.done)})};return f},"es6","es3");
JSROOT.define(["d3","jquery","painter","jquery-ui"],function(h,k,l){function m(a,b){var d=-1,c=l.root_colors;if("string"==typeof a){if(a&&"none"!=a)for(var e=1;e<c.length;++e){if(c[e]==a){d=e;break}}else d=0;0>d&&0==a.indexOf("rgb")&&(d=9999)}else!isNaN(a)&&c[a]&&(d=a,a=c[d]);if(0>d)return"";50<=d&&(a=h.color(a),d="TColor::GetColor("+a.r+","+a.g+","+a.b+")");return"exec:"+b+"("+d+")"}JSROOT.loadScript("$$$style/jquery-ui");"undefined"===typeof jQuery&&(globalThis.jQuery=k);var f=function(a,b,d){this.painter=
a;this.menuname=b;this.element=null;this.code="";this.cnt=1;this.funcs={};this.separ=!1;d&&"object"==typeof d&&void 0!==d.clientX&&void 0!==d.clientY&&(this.show_evnt={clientX:d.clientX,clientY:d.clientY});this.remove_bind=this.remove.bind(this)};f.prototype.add=function(a,b,d,c){if("separator"==a)this.code+="<li>-</li>",this.separ=!0;else if(0==a.indexOf("header:"))this.code+="<li class='ui-widget-header' style='padding:3px; padding-left:5px;'>"+a.substr(7)+"</li>";else if("endsub:"==a)this.code+=
"</ul></li>";else{var e="",g="</li>";c=c?" title='"+c+"'":"";0==a.indexOf("sub:")&&(a=a.substr(4),g="<ul>");"function"==typeof b&&(d=b,b=a);0==a.indexOf("chk:")?(e="<span class='ui-icon ui-icon-check' style='margin:1px'></span>",a=a.substr(4)):0==a.indexOf("unk:")&&(e="<span class='ui-icon ui-icon-blank' style='margin:1px'></span>",a=a.substr(4));e=0==k.ui.version.indexOf("1.10")||0==k.ui.version.indexOf("1.9")?'<a href="#">'+e+a+"</a>":0==k.ui.version.indexOf("1.11")?e+a:"<div"+c+">"+e+a+"</div>";
this.code+="<li cnt='"+this.cnt+(void 0!==b?"' arg='"+b:"")+"'>"+e+g;"function"==typeof d&&(this.funcs[this.cnt]=d);this.cnt++}};f.prototype.addchk=function(a,b,d,c){var e=c;"function"==typeof d&&(c=d,e=function(a){return c("1"==d)},d=a?"0":"1");return this.add((a?"chk:":"unk:")+b,d,e)};f.prototype.size=function(){return this.cnt-1};f.prototype.addDrawMenu=function(a,b,d){b||(b=[]);0==b.length&&b.push("");var c=!1;0==a.indexOf("nosub:")&&(c=!0,a=a.substr(6));if(1===b.length)return"inspect"===b[0]&&
(a=a.replace("Draw","Inspect")),this.add(a,b[0],d);c||this.add("sub:"+a,b[0],d);for(var e=0;e<b.length;++e){var g=b[e];""==g&&(g="&lt;dflt&gt;");var f=e+1;if(5<b.length&&0<g.length)for(;f<b.length&&0==b[f].indexOf(g);)f++;c&&(g=a+" "+g);if(f<e+2)this.add(g,b[e],d);else{this.add("sub:"+g,b[e],d);for(e+=1;e<f;++e)this.add(b[e],b[e],d);this.add("endsub:");e=f-1}}c||this.add("endsub:")};f.prototype.addColorMenu=function(a,b,d,c){if(void 0!==b){this.add("sub:"+a,function(){var a="string"!==typeof b,c=
prompt("Enter color "+(a?"(only id number)":"(name or id)"),b);if(null!==c){var g=parseInt(c);if(!isNaN(g)&&l.getColor(g))c=l.getColor(g);else if(a)return;d(a?g:c)}});var e="string"!==typeof b;for(a=-1;11>a;++a)if(!(0>a&&e||10==a&&1!==c)){var g=0>a?"none":l.getColor(a);0==a&&1==c&&(g="none");this.addchk(b==(e?a:g),"<svg width='100' height='18' style='margin:0px;background-color:"+g+"'><text x='4' y='12' style='font-size:12px' fill='"+(1==a?"white":"black")+"'>"+g+"</text></svg>",e?a:g,function(a){return d(e?
parseInt(a):a)})}this.add("endsub:")}};f.prototype.addSizeMenu=function(a,b,d,c,e,g){if(void 0!==e){for(this.add("sub:"+a,function(){var b=e.toFixed(4);.1<=c&&(b=e.toFixed(2));1<=c&&(b=e.toFixed(0));if(b=prompt("Enter value of "+a,b))b=parseFloat(b),isNaN(b)||g(1<=c?Math.round(b):b)});b<=d;b+=c){var f=b.toFixed(2);.1<=c&&(f=b.toFixed(1));1<=c&&(f=b.toFixed(0));this.addchk(Math.abs(e-b)<c/2,f,b,function(a){return g(1<=c?parseInt(a):parseFloat(a))})}this.add("endsub:")}};f.prototype.addSelectMenu=function(a,
b,d,c){this.add("sub:"+a);for(a=0;a<b.length;++a)this.addchk(b[a]==d,b[a],b[a],function(a){return c(a)});this.add("endsub:")};f.prototype.addRColorMenu=function(a,b,d){var c="black white red green blue yellow magenta cyan".split(" ");this.add("sub:"+a,function(){var a=prompt("Enter color name - empty string will reset color",b);d(a)});a=null;for(var e="black",g="default",f="",h=-1;h<c.length;++h)0<=h&&(g=a=c[h],f="background-color:"+a,e="white"==a?"black":"white"),this.addchk(b==a,"<svg width='100' height='18' style='margin:0px;"+
f+"'><text x='4' y='12' style='font-size:12px' fill='"+e+"'>"+g+"</text></svg>",g,function(a){return d("default"==a?null:a)});this.add("endsub:")};f.prototype.addRAttrTextItems=function(a,b,d){b||(b={});this.addRColorMenu("color",a.color,function(a){return d({name:"color_name",value:a})});a.scaled?this.addSizeMenu("size",.01,.1,.01,a.size/a.scale,function(a){return d({name:"size",value:a})}):this.addSizeMenu("size",6,20,2,a.size,function(a){return d({name:"size",value:a})});this.addSelectMenu("family",
["Arial","Times New Roman","Courier New","Symbol"],a.name,function(a){return d({name:"font_family",value:a})});this.addSelectMenu("style",["normal","italic","oblique"],a.style||"normal",function(a){return d({name:"font_style",value:"normal"==a?null:a})});this.addSelectMenu("weight",["normal","lighter","bold","bolder"],a.weight||"normal",function(a){return d({name:"font_weight",value:"normal"==a?null:a})});b.noalign||this.add("align");b.noangle||this.add("angle")};f.prototype.addTextAttributesMenu=
function(a,b){var d=a.getObject();if(d&&"fTextColor"in d){this.add("sub:"+(b?b:"Text"));this.addColorMenu("color",d.fTextColor,function(b){d.fTextColor=b;a.interactiveRedraw(!0,m(b,"SetTextColor"))});b=[11,12,13,21,22,23,31,32,33];this.add("sub:align");for(var c=0;c<b.length;++c)this.addchk(b[c]==d.fTextAlign,b[c],b[c],function(a){this.getObject().fTextAlign=parseInt(a);this.interactiveRedraw(!0,"exec:SetTextAlign("+a+")")}.bind(a));this.add("endsub:");this.add("sub:font");for(b=1;16>b;++b)this.addchk(b==
Math.floor(d.fTextFont/10),b,b,function(a){this.getObject().fTextFont=10*parseInt(a)+2;this.interactiveRedraw(!0,"exec:SetTextFont("+this.getObject().fTextFont+")")}.bind(a));this.add("endsub:");this.add("endsub:")}};f.prototype.addAttributesMenu=function(a,b){b||(b="");if(a.lineatt&&a.lineatt.used){this.add("sub:"+b+"Line att");this.addSizeMenu("width",1,10,1,a.lineatt.width,function(b){a.lineatt.change(void 0,b);a.interactiveRedraw(!0,"exec:SetLineWidth("+b+")")});this.addColorMenu("color",a.lineatt.color,
function(b){a.lineatt.change(b);a.interactiveRedraw(!0,m(b,"SetLineColor"))});this.add("sub:style",function(){var a=prompt("Enter line style id (1-solid)",1);null!==a&&(a=parseInt(a),!isNaN(a)&&l.root_line_styles[a]&&(this.lineatt.change(void 0,void 0,a),this.interactiveRedraw(!0,"exec:SetLineStyle("+a+")")))}.bind(a));for(var d=1;11>d;++d)this.addchk(a.lineatt.style==d,"<svg width='100' height='18'><text x='1' y='12' style='font-size:12px'>"+d+"</text><line x1='30' y1='8' x2='100' y2='8' stroke='black' stroke-width='3' stroke-dasharray='"+
l.root_line_styles[d]+"'></line></svg>",d,function(a){this.lineatt.change(void 0,void 0,parseInt(a));this.interactiveRedraw(!0,"exec:SetLineStyle("+a+")")}.bind(a));this.add("endsub:");this.add("endsub:");if("excl_side"in a.lineatt&&0!==a.lineatt.excl_side){this.add("sub:Exclusion");this.add("sub:side");for(d=-1;1>=d;++d)this.addchk(a.lineatt.excl_side==d,d,d,function(a){this.lineatt.changeExcl(parseInt(a));this.interactiveRedraw()}.bind(a));this.add("endsub:");this.addSizeMenu("width",10,100,10,
a.lineatt.excl_width,function(b){a.lineatt.changeExcl(void 0,b);a.interactiveRedraw()});this.add("endsub:")}}if(a.fillatt&&a.fillatt.used){this.add("sub:"+b+"Fill att");this.addColorMenu("color",a.fillatt.colorindx,function(b){a.fillatt.change(b,void 0,a.getCanvSvg());a.interactiveRedraw(!0,m(b,"SetFillColor"))},a.fillatt.kind);this.add("sub:style",function(){var a=prompt("Enter fill style id (1001-solid, 3000..3010)",this.fillatt.pattern);null!==a&&(a=parseInt(a),isNaN(a)||(this.fillatt.change(void 0,
a,this.getCanvSvg()),this.interactiveRedraw(!0,"exec:SetFillStyle("+a+")")))}.bind(a));d=[1,1001,3001,3002,3003,3004,3005,3006,3007,3010,3021,3022];for(var c=0;c<d.length;++c){var e=a.createAttFill({std:!1,pattern:d[c],color:a.fillatt.colorindx||1});e="<svg width='100' height='18'><text x='1' y='12' style='font-size:12px'>"+d[c].toString()+"</text><rect x='40' y='0' width='60' height='18' stroke='none' fill='"+e.getFillColor()+"'></rect></svg>";this.addchk(a.fillatt.pattern==d[c],e,d[c],function(a){this.fillatt.change(void 0,
parseInt(a),this.getCanvSvg());this.interactiveRedraw(!0,"exec:SetFillStyle("+a+")")}.bind(a))}this.add("endsub:");this.add("endsub:")}if(a.markeratt&&a.markeratt.used){this.add("sub:"+b+"Marker att");this.addColorMenu("color",a.markeratt.color,function(b){a.markeratt.change(b);a.interactiveRedraw(!0,m(b,"SetMarkerColor"))});this.addSizeMenu("size",.5,6,.5,a.markeratt.size,function(b){a.markeratt.change(void 0,void 0,b);a.interactiveRedraw(!0,"exec:SetMarkerSize("+parseInt(b)+")")});this.add("sub:style");
b=[1,2,3,4,5,6,7,8,21,22,23,24,25,26,27,28,29,30,31,32,33,34];for(d=0;d<b.length;++d)c=new JSROOT.TAttMarkerHandler({style:b[d],color:a.markeratt.color,size:1.7}),c="<svg width='60' height='18'><text x='1' y='12' style='font-size:12px'>"+b[d].toString()+"</text><path stroke='black' fill='"+(c.fill?"black":"none")+"' d='"+c.create(40,8)+"'></path></svg>",this.addchk(a.markeratt.style==b[d],c,b[d],function(a){this.markeratt.change(void 0,parseInt(a));this.interactiveRedraw(!0,"exec:SetMarkerStyle("+
a+")")}.bind(a));this.add("endsub:");this.add("endsub:")}};f.prototype.addTAxisMenu=function(a,b,d){this.add("sub:Labels");this.addchk(b.TestBit(JSROOT.EAxisBits.kCenterLabels),"Center",function(c){b.InvertBit(JSROOT.EAxisBits.kCenterLabels);a.interactiveRedraw("pad","exec:CenterLabels("+c+")",d)});this.addchk(b.TestBit(JSROOT.EAxisBits.kLabelsVert),"Rotate",function(c){b.InvertBit(JSROOT.EAxisBits.kLabelsVert);a.interactiveRedraw("pad","exec:SetBit(TAxis::kLabelsVert,"+c+")",d)});this.addColorMenu("Color",
b.fLabelColor,function(c){b.fLabelColor=c;a.interactiveRedraw("pad",m(c,"SetLabelColor"),d)});this.addSizeMenu("Offset",0,.1,.01,b.fLabelOffset,function(c){b.fLabelOffset=c;a.interactiveRedraw("pad","exec:SetLabelOffset("+c+")",d)});this.addSizeMenu("Size",.02,.11,.01,b.fLabelSize,function(c){b.fLabelSize=c;a.interactiveRedraw("pad","exec:SetLabelSize("+c+")",d)});this.add("endsub:");this.add("sub:Title");this.add("SetTitle",function(){var c=prompt("Enter axis title",b.fTitle);null!==c&&(b.fTitle=
c,a.interactiveRedraw("pad",'exec:SetTitle("'+c+'")',d))});this.addchk(b.TestBit(JSROOT.EAxisBits.kCenterTitle),"Center",function(c){b.InvertBit(JSROOT.EAxisBits.kCenterTitle);a.interactiveRedraw("pad","exec:CenterTitle("+c+")",d)});this.addchk(b.TestBit(JSROOT.EAxisBits.kOppositeTitle),"Opposite",function(){b.InvertBit(JSROOT.EAxisBits.kOppositeTitle);a.redrawPad()});this.addchk(b.TestBit(JSROOT.EAxisBits.kRotateTitle),"Rotate",function(c){b.InvertBit(JSROOT.EAxisBits.kRotateTitle);a.interactiveRedraw("pad",
"exec:RotateTitle("+c+")",d)});this.addColorMenu("Color",b.fTitleColor,function(c){b.fTitleColor=c;a.interactiveRedraw("pad",m(c,"SetTitleColor"),d)});this.addSizeMenu("Offset",0,3,.2,b.fTitleOffset,function(c){b.fTitleOffset=c;a.interactiveRedraw("pad","exec:SetTitleOffset("+c+")",d)});this.addSizeMenu("Size",.02,.11,.01,b.fTitleSize,function(c){b.fTitleSize=c;a.interactiveRedraw("pad","exec:SetTitleSize("+c+")",d)});this.add("endsub:");this.add("sub:Ticks");"TGaxis"==b._typename?(this.addColorMenu("Color",
b.fLineColor,function(c){b.fLineColor=c;a.interactiveRedraw("pad")}),this.addSizeMenu("Size",-.05,.055,.01,b.fTickSize,function(c){b.fTickSize=c;a.interactiveRedraw("pad")})):(this.addColorMenu("Color",b.fAxisColor,function(c){b.fAxisColor=c;a.interactiveRedraw("pad",m(c,"SetAxisColor"),d)}),this.addSizeMenu("Size",-.05,.055,.01,b.fTickLength,function(c){b.fTickLength=c;a.interactiveRedraw("pad","exec:SetTickLength("+c+")",d)}));this.add("endsub:")};f.prototype.remove=function(){null!==this.element&&
(this.element.remove(),this.resolveFunc&&(this.resolveFunc(),delete this.resolveFunc),document.body.removeEventListener("click",this.remove_bind));this.element=null};f.prototype.show=function(a){var b=this;this.remove();!a&&this.show_evnt&&(a=this.show_evnt);document.body.addEventListener("click",this.remove_bind);var d=document.getElementById(this.menuname);d&&d.parentNode.removeChild(d);k(document.body).append('<ul class="jsroot_ctxmenu">'+this.code+"</ul>");this.element=k(".jsroot_ctxmenu");var c=
this;this.element.attr("id",this.menuname).css("left",a.clientX+window.pageXOffset).css("top",a.clientY+window.pageYOffset).css("position","absolute").menu({items:"> :not(.ui-widget-header)",select:function(a,b){a=b.item.attr("arg");b=(b=b.item.attr("cnt"))?c.funcs[b]:null;c.remove();"function"==typeof b&&(c.painter?b.bind(c.painter)(a):b(a))}});var e=d=null;a.clientX+this.element.width()>k(window).width()&&(d=k(window).width()-this.element.width()-20);a.clientY+this.element.height()>k(window).height()&&
(e=k(window).height()-this.element.height()-20);null!==d&&this.element.css("left",(0<d?d:0)+window.pageXOffset);null!==e&&this.element.css("top",(0<e?e:0)+window.pageYOffset);return new Promise(function(a){b.resolveFunc=a})};l.createMenu=function(a,b,d){a=new f(b,d||"root_ctx_menu",a);return Promise.resolve(a)};l.closeMenu=function(a){return(a=document.getElementById(a||"root_ctx_menu"))?(a.parentNode.removeChild(a),!0):!1};JSROOT.nodejs&&(module.exports=l);return l});
